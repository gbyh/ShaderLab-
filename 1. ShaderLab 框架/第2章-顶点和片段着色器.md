##Writing vertex and fragment shaders

ShaderLabç€è‰²å™¨åŒ…æ‹¬çš„ä¸ä»…ä»…æ˜¯â€œç¡¬ä»¶ç€è‰²å™¨â€ã€‚ä»–ä»¬åšè®¸å¤šäº‹æƒ…ã€‚å®ƒä»¬æè¿°äº†åœ¨æè´¨æ£€éªŒå‘˜ä¸­æ˜¾ç¤ºçš„å±æ€§ï¼ŒåŒ…å«ä¸åŒå›¾å½¢ç¡¬ä»¶çš„å¤šä¸ªç€è‰²å™¨å®ç°ï¼Œé…ç½®å›ºå®šå‡½æ•°ç¡¬ä»¶çŠ¶æ€ç­‰ç­‰.ã€‚å®é™…ä¸Šå¯ç¼–ç¨‹ç€è‰²å™¨--å°±åƒé¡¶ç‚¹å’Œç‰‡æ®µç¨‹åºï¼Œåªæ˜¯æ•´ä½“çš„ä¸€éƒ¨åˆ†ShaderLabçš„â€œç€è‰²â€çš„æ¦‚å¿µã€‚çœ‹çœ‹ç€è‰²å™¨æ•™ç¨‹çš„åŸºæœ¬ä»‹ç»ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è°ƒç”¨ä½å±‚æ¬¡çš„ç¡¬ä»¶ç€è‰²å™¨ç€è‰²å™¨ç¨‹åºã€‚

If you want to write shaders that interact with lighting, take a look at Surface Shaders documentation. For some examples, take a look at Vertex and Fragment Shader Examples. The rest of this page will assume shaders that do not interact with Unity lights (e.g. special effects, Image Effects etc.)
å¦‚æœä½ æƒ³å†™ç¯å…‰äº¤äº’çš„ç€è‰²å™¨ï¼ŒæŸ¥çœ‹Surface Shadersæ–‡æ¡£ã€‚å¯¹äºä¸€äº›ä¾‹å­ï¼Œçœ‹çœ‹é¡¶ç‚¹å’Œç‰‡æ®µç€è‰²å™¨çš„ä¾‹å­ã€‚æœ¬é¡µé¢çš„å…¶ä½™éƒ¨åˆ†å°†æ‰¿æ‹…ç€è‰²ä¸ä¸Unityç¯å…‰äº¤äº’ï¼ˆå¦‚ç‰¹æ®Šæ•ˆæœï¼Œå›¾åƒæ•ˆæœç­‰ï¼‰

ç€è‰²ç¨‹åºæ˜¯ç”¨CG / HLSLè¯­è¨€ï¼Œé€šè¿‡åµŒå…¥â€œç‰‡æ®µâ€åœ¨æ¸²æŸ“æ–‡æœ¬ï¼Œé‡Œé¢é€šè¿‡å‘½ä»¤ã€‚ä»–ä»¬é€šå¸¸çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```csharp
  Pass {
      // ... the usual pass state setup ...
      
      CGPROGRAM
      // compilation directives for this snippet, e.g.:
      #pragma vertex vert
      #pragma fragment frag
      
      // the Cg/HLSL code itself
      
      ENDCG
      // ... the rest of pass setup ...
  }
```

####Cg/HLSL ç‰‡æ®µ

CG / HLSLç¨‹åºç‰‡æ®µè¢«å†™å…¥åœ¨CGPROGRAMå’ŒENDCGä¹‹é—´ã€‚

åœ¨è¿™æ®µæ±‡ç¼–æŒ‡ä»¤çš„å¼€å§‹å¯ä»¥ä½œä¸º#ç¼–è¯‘æŒ‡ç¤ºè¯­å¥ã€‚æŒ‡ç¤ºå“ªä¸ªç€è‰²å™¨å‡½æ•°ç¼–è¯‘çš„æŒ‡ä»¤ï¼š

\#pragma vertex name - ç¼–è¯‘å‡½æ•°åç§°ä¸ºé¡¶ç‚¹ç€è‰².

\#pragma fragment name - ç¼–è¯‘å‡½æ•°åä¸ºç‰‡æ®µæè´¨.

\#pragma geometry name - ç¼–è¯‘å‡½æ•°åä½œä¸ºDX10å‡ ä½•ç€è‰²å™¨ã€‚è¿™ä¸ªé€‰é¡¹ä¼šè‡ªåŠ¨æ‰“å¼€#pragma target 4.0ï¼Œæè¿°å¦‚ä¸‹ã€‚

\#pragma hull name - ç¼–è¯‘å‡½æ•°åä¸ºDX11å¤–å£³ç€è‰²å™¨ã€‚è¿™ä¸ªé€‰é¡¹ä¼šè‡ªåŠ¨æ‰“å¼€#pragma target 5.0ï¼Œæè¿°å¦‚ä¸‹ã€‚

\#pragma domain name - ç¼–è¯‘å‡½æ•°åä¸ºDX11åŸŸç€è‰²å™¨ã€‚è¿™ä¸ªé€‰é¡¹ä¼šè‡ªåŠ¨æ‰“å¼€#pragma target 5.0ï¼Œæè¿°å¦‚ä¸‹ã€‚

####å…¶ä»–ç¼–è¯‘æŒ‡ä»¤ï¼š

\#pragma target name - å®ƒçš„ç›®æ ‡ç¼–è¯‘ä¸ºã€‚æŸ¥çœ‹ç€è‰²ç¼–è¯‘ç›®æ ‡é¡µé¢çš„ç»†èŠ‚ã€‚

\#pragma only_renderers ç©ºé—´åˆ†éš”çš„åç§°-ç¼–è¯‘ç€è‰²å™¨åªç»™æ¸²æŸ“ã€‚é»˜è®¤çš„ç€è‰²å™¨ç¼–è¯‘æ‰€æœ‰çš„æ¸²æŸ“å™¨ã€‚è¯¦æƒ…è§ä¸‹é¢çš„æ¸²æŸ“å™¨ã€‚

\#pragma exclude_renderers ç©ºé—´åˆ†éš”çš„åå­—ä¸ç¼–è¯‘äº†æ¸²æŸ“ç€è‰²å™¨ã€‚é»˜è®¤çš„ç€è‰²å™¨ç¼–è¯‘æ‰€æœ‰çš„æ¸²æŸ“å™¨ã€‚è¯¦æƒ…è§ä¸‹é¢çš„æ¸²æŸ“å™¨ã€‚

\#pragma multi_compile â€¦ - ç”¨äºå·¥ä½œä¸å¤šä¸ªç€è‰²å˜ç§ã€‚

\#pragma enable_d3d11_debug_symbols - ç”Ÿæˆç¼–è¯‘ä¸ºDirectX 11ç€è‰²å™¨è°ƒè¯•ä¿¡æ¯ï¼Œè¿™å°†å…è®¸ä½ è°ƒè¯•ç€è‰²å™¨é€šè¿‡Visual Studio 2012ï¼ˆæˆ–æ›´é«˜ï¼‰çš„å›¾å½¢è°ƒè¯•å™¨ã€‚

\#pragma hardware_tier_variants æ¸²æŸ“å™¨çš„åç§°ç”Ÿæˆå¤šä¸ªç€è‰²å™¨çš„ç¡¬ä»¶ç‰ˆæœ¬çš„æ¯ä¸ªç¼–è¯‘ç€è‰²å™¨ï¼Œæ¯ä¸ªç¡¬ä»¶å±‚ï¼Œå¯ä»¥é€‰æ‹©æ¸²æŸ“å™¨ã€‚è¯¦æƒ…è§ä¸‹é¢çš„æ¸²æŸ“å™¨ã€‚

æ¯ä¸ªä»£ç æ®µå¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªé¡¶ç‚¹ç¨‹åºå’Œä¸€ä¸ªç‰‡æ®µç¨‹åºã€‚å› æ­¤# pragmaé¡¶ç‚¹å’Œç‰‡æ®µ# pragmaæŒ‡ä»¤è¦æ±‚ã€‚

æ±‡ç¼–æŒ‡ä»¤ï¼Œä¸è¦åšä»»ä½•ä»Unity5ï¼Œå¯ä»¥å®‰å…¨åœ°åˆ é™¤ï¼š #pragma glsl, #pragma glsl_no_auto_normalization, #pragma profileoption, #pragma fragmentoption.

####Rendering platforms

Unityæ”¯æŒä¸€äº›æ¸²æŸ“APIï¼ˆå¦‚OpenGLå’ŒDirect3D 9ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„ç€è‰²å™¨ç¨‹åºè¢«ç¼–è¯‘æˆæ”¯æŒæ‰€æœ‰æ¸²æŸ“å™¨ã€‚ä½ å¯ä»¥æ¸²æŸ“ç¼–è¯‘ä½¿ç”¨#è¯­ç”¨only_renderersæˆ–exclude_renderers # pragmaæŒ‡ä»¤ã€‚åœ¨æ‚¨æ˜ç¡®åœ°ä½¿ç”¨ä¸€äº›åœ¨æŸäº›å¹³å°ä¸Šä¸å¯èƒ½ä½¿ç”¨çš„ç€è‰²å™¨è¯­è¨€ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚æ”¯æŒçš„æ¸²æŸ“å™¨æ˜¯ï¼š

    d3d9 - Direct3D 9
    d3d11 - Direct3D 11/12
    glcore - OpenGL 3.x/4.x
    gles - OpenGL ES 2.0
    gles3 - OpenGL ES 3.x
    metal - iOS/Mac Metal
    d3d11_9x - Direct3D 11 9.x feature level, as commonly used on WSA platforms
    xboxone - Xbox One
    ps4 - PlayStation 4
    psp2 - PlayStation Vita
    n3ds - Nintendo 3DS
    wiiu - Nintendo Wii U
    
ä¾‹å¦‚ï¼Œè¯¥è¡Œåªä¼šåœ¨ç¼–è¯‘ç€è‰²å™¨D3D9æ¨¡å¼ï¼š
```csharp
    #pragma only_renderers d3d9
```


ğŸ”š



